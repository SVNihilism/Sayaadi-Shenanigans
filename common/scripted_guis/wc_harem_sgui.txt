opening_harem_window = {
	scope = character

	is_valid = {
		custom_tooltip = {
			text = any_union_exist_gui
			has_global_variable_list = all_unions
		}
	}
	effect = {
		hidden_effect = {
			if = {
				limit = {
					has_global_variable_list = all_unions
				}
				if = {
					limit = { has_variable = this_union }
					random_in_global_list = {
						variable = all_unions
						limit = { var:this_union = prev.var:this_union }
						save_temporary_scope_as = this_union
					}
				}
				else = {
					ordered_in_global_list = {
						variable = all_unions
						position = 0
						save_temporary_scope_as = this_union
					}
				}
				
				get_this_union_variables_effect = yes
				set_variable = { name = gui_union value = scope:this_union }
				set_variable = { name = gui_this_union_name value = scope:this_union.var:this_union }
			}
			else = {
				set_variable = { name = gui_this_union_name value = flag:empty_union }
				if = { limit = { always = no var:gui_this_union_name = flag:empty_union } }
			}
		}
	}
}
harem_enable = {
	scope = character
	is_shown = {
		has_variable = harem_building
	}
}